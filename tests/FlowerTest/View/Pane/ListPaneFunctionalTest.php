<?php
namespace FlowerTest\View\Pane;


use Flower\View\Pane\Builder;
use Flower\View\Pane\ListPaneFactory;
use Flower\View\Pane\ListRenderer;

/**
 * Generated by PHPUnit_SkeletonGenerator 1.2.1 on 2014-02-01 at 22:15:54.
 */
class ListPaneTest extends \PHPUnit_Framework_TestCase
{

    protected $builder;

    public function setUp()
    {
        $this->builder = new Builder(array('pane_class' => 'Flower\View\Pane\ListPane'));
    }

    public function testSimple()
    {
        $expected = '
<!-- begin ListRenderer -->
<ul>
</ul>
<!-- end ListRenderer -->
';
        $expected = str_replace(array("\n","\r"),'', $expected);
        $paneConfig = array(
            'id' => 'foo',
        );
        $pane = ListPaneFactory::factory($paneConfig, $this->builder);
        $renderer = new ListRenderer($pane);
        $this->assertEquals($expected, str_replace(array("\n","\r"), '', (string) $renderer));
    }

    public function testSimpleInner()
    {
        $expected = '
<!-- begin ListRenderer -->
<ul>
  <!-- start content ListPane -->
  <li>
  <span class="main">
  <!-- start content content -->
foo
  <!-- end content content -->
  </span>  </li>
  <!-- end content ListPane -->
</ul>
<!-- end ListRenderer -->
';
        $expected = str_replace(array("\n","\r"),'', $expected);
        $paneConfig = array(
            'classes' => 'container',
            'var' => 'foo',
            'inner' => array(
                'classes' => 'main',
                'var' => 'content',
            ));
        $pane = $this->builder->build($paneConfig);
        $this->assertInstanceOf('Flower\View\Pane\ListPane', $pane);
        $renderer = new ListRenderer($pane);
        $renderer->setVar('content', 'foo');
        $this->assertEquals($expected, str_replace(array("\n","\r"), '', (string) $renderer));
    }

    public function testMultiInner()
    {
        $expected = '
<!-- begin ListRenderer -->
<ul>
  <li>
  <span class="main">
    <!-- start content anchor -->
<a href="foo">bar</a>
    <!-- end content anchor -->
  </span>
  <ul>
    <!-- start content ListPane -->
    <li>
    <span class="main">
    <!-- start content content -->
foo
    <!-- end content content -->
    </span>
    </li>
    <!-- end content ListPane -->
  </ul>
  </li>
</ul>
<!-- end ListRenderer -->
';
        $expected = str_replace(array("\n","\r"),'', $expected);
        $paneConfig = array(
            'classes' => 'container',
            'var' => 'content',
            'inner' => array(
                'classes' => 'main',
                'var' => 'anchor',
                'inner' => array(
                    'classes' => 'main',
                    'var' => 'content',
                ),
            ),
        );
        $pane = $this->builder->build($paneConfig);
        $this->assertInstanceOf('Flower\View\Pane\ListPane', $pane);
        $renderer = new ListRenderer($pane);
        $renderer->setVar('content', 'foo');
        $renderer->setVar('anchor', '<a href="foo">bar</a>');
        $this->assertEquals($expected, str_replace(array("\n","\r"), '', (string) $renderer));
    }

    public function testMultiInnerCommentOff()
    {
        $expected = '<ul><li><span class="main"><a href="foo">bar</a></span><ul><li><span class="main">foo</span></li></ul></li></ul>';
        $paneConfig = array(
            'classes' => 'container',
            'var' => 'content',
            'inner' => array(
                'classes' => 'main',
                'var' => 'anchor',
                'inner' => array(
                    'classes' => 'main',
                    'var' => 'content',
                ),
            ),
        );
        $pane = $this->builder->build($paneConfig);
        $this->assertInstanceOf('Flower\View\Pane\ListPane', $pane);
        $renderer = new ListRenderer($pane);
        $renderer->commentEnable = false;
        $renderer->indent = "";
        $renderer->linefeed = "";
        $renderer->setVar('content', 'foo');
        $renderer->setVar('anchor', '<a href="foo">bar</a>');
        $this->assertEquals($expected, (string) $renderer);
    }
}
